{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Husei\\\\aubify\\\\Frontend\\\\src\\\\components\\\\Feedback\\\\Feedback.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport \"./Feedback.css\";\nimport NavBar from \"../NavBar/NavBar\";\nimport { useUser } from \"../../UserContext\";\nimport SideBar from \"../SideBar/SideBar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Feedback = () => {\n  _s();\n  const [feedback, setFeedback] = useState(\"\");\n  const [feedbackList, setFeedbackList] = useState([]);\n  const [remainingWords, setRemainingFeedbackWords] = useState(500);\n  const [feedbackError, setFeedbackError] = useState(\"\");\n  const {\n    isAdmin\n  } = useUser();\n  const userEmail = localStorage.getItem(\"userEmail\");\n  useEffect(() => {\n    if (isAdmin) {\n      fetchFeedbackList();\n    }\n  }, [isAdmin]);\n  useEffect(() => {\n    const remaining = Math.max(0, 500 - feedback.length);\n    setRemainingFeedbackWords(remaining);\n  }, [feedback]);\n  const handleFeedbackChange = event => {\n    setFeedback(event.target.value);\n    setFeedbackError(\"\");\n  };\n  const fetchFeedbackList = async () => {\n    try {\n      const response = await axios.get(\"/getFeedbackList\");\n      setFeedbackList(response.data);\n    } catch (error) {\n      console.error(\"Error fetching feedback list:\", error);\n    }\n  };\n  const handleSendFeedback = async () => {\n    if (feedback.trim() === \"\") {\n      setFeedbackError(\"Feedback cannot be empty!\");\n      return;\n    }\n    try {\n      await axios.post(\"/sendFeedback\", {\n        email: userEmail,\n        message: feedback\n      });\n      setFeedback(\"\");\n      setFeedbackError(\"Thank you for your feedback!\");\n    } catch (error) {\n      console.error(\"Error sending feedback:\", error);\n      setFeedbackError(\"You have reached your limit for sending feedback today, please try again later!\");\n    }\n  };\n\n  // Render nothing if isAdmin is null (initial state)\n  if (isAdmin === null) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"feedback-page\",\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SideBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), isAdmin ?\n    /*#__PURE__*/\n    // Admin interface\n    _jsxDEV(\"div\", {\n      className: \"admin-feedback-interface\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"interface-title\",\n        children: \"Users Feedback\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feedback-list\",\n        children: feedbackList.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"feedback-item\",\n          children: item.message\n        }, item._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this) :\n    /*#__PURE__*/\n    // User interface\n    _jsxDEV(\"div\", {\n      className: \"user-feedback-interface\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"interface-title\",\n        children: \"Provide us with your Feedback!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: \"feedback-input\",\n        value: feedback,\n        onChange: handleFeedbackChange,\n        onKeyDown: e => {\n          if (feedback.length >= 500 && e.key !== \"Backspace\" && e.key !== \"Delete\") {\n            e.preventDefault();\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"remaining-feedback-characters\",\n        children: [\"Characters Remaining: \", remainingWords]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"send-feedback-button\",\n        onClick: handleSendFeedback,\n        children: \"Send Feedback\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this), feedbackError && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message-feedback\",\n        children: feedbackError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n_s(Feedback, \"UUuMQ9T2QkV1VIibIiDUVQqw2T4=\", false, function () {\n  return [useUser];\n});\n_c = Feedback;\nexport default Feedback;\nvar _c;\n$RefreshReg$(_c, \"Feedback\");","map":{"version":3,"names":["React","useState","useEffect","axios","NavBar","useUser","SideBar","jsxDEV","_jsxDEV","Feedback","_s","feedback","setFeedback","feedbackList","setFeedbackList","remainingWords","setRemainingFeedbackWords","feedbackError","setFeedbackError","isAdmin","userEmail","localStorage","getItem","fetchFeedbackList","remaining","Math","max","length","handleFeedbackChange","event","target","value","response","get","data","error","console","handleSendFeedback","trim","post","email","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","item","_id","onChange","onKeyDown","e","key","preventDefault","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Husei/aubify/Frontend/src/components/Feedback/Feedback.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport \"./Feedback.css\";\nimport NavBar from \"../NavBar/NavBar\";\nimport { useUser } from \"../../UserContext\";\nimport SideBar from \"../SideBar/SideBar\";\n\nconst Feedback = () => {\n  const [feedback, setFeedback] = useState(\"\");\n  const [feedbackList, setFeedbackList] = useState([]);\n  const [remainingWords, setRemainingFeedbackWords] = useState(500);\n  const [feedbackError, setFeedbackError] = useState(\"\");\n  const { isAdmin } = useUser();\n  const userEmail = localStorage.getItem(\"userEmail\");\n\n  useEffect(() => {\n    if (isAdmin) {\n      fetchFeedbackList();\n    }\n  }, [isAdmin]);\n\n  useEffect(() => {\n    const remaining = Math.max(0, 500 - feedback.length);\n    setRemainingFeedbackWords(remaining);\n  }, [feedback]);\n\n  const handleFeedbackChange = (event) => {\n    setFeedback(event.target.value);\n    setFeedbackError(\"\");\n  };\n\n  const fetchFeedbackList = async () => {\n    try {\n      const response = await axios.get(\"/getFeedbackList\");\n      setFeedbackList(response.data);\n    } catch (error) {\n      console.error(\"Error fetching feedback list:\", error);\n    }\n  };\n\n  const handleSendFeedback = async () => {\n    if (feedback.trim() === \"\") {\n      setFeedbackError(\"Feedback cannot be empty!\");\n      return;\n    }\n    try {\n      await axios.post(\"/sendFeedback\", {\n        email: userEmail,\n        message: feedback,\n      });\n      setFeedback(\"\");\n      setFeedbackError(\"Thank you for your feedback!\");\n    } catch (error) {\n      console.error(\"Error sending feedback:\", error);\n      setFeedbackError(\n        \"You have reached your limit for sending feedback today, please try again later!\"\n      );\n    }\n  };\n\n  // Render nothing if isAdmin is null (initial state)\n  if (isAdmin === null) {\n    return null;\n  }\n\n  return (\n    <div className=\"feedback-page\">\n      <NavBar />\n      <SideBar />\n      {isAdmin ? (\n        // Admin interface\n        <div className=\"admin-feedback-interface\">\n          <h1 className=\"interface-title\">Users Feedback</h1>\n          <div className=\"feedback-list\">\n            {feedbackList.map((item) => (\n              <div key={item._id} className=\"feedback-item\">\n                {item.message}\n              </div>\n            ))}\n          </div>\n        </div>\n      ) : (\n        // User interface\n        <div className=\"user-feedback-interface\">\n          <h1 className=\"interface-title\">Provide us with your Feedback!</h1>\n          <textarea\n            className=\"feedback-input\"\n            value={feedback}\n            onChange={handleFeedbackChange}\n            onKeyDown={(e) => {\n              if (\n                feedback.length >= 500 &&\n                e.key !== \"Backspace\" &&\n                e.key !== \"Delete\"\n              ) {\n                e.preventDefault();\n              }\n            }}\n          />\n          <div className=\"remaining-feedback-characters\">\n            Characters Remaining: {remainingWords}\n          </div>\n          <button className=\"send-feedback-button\" onClick={handleSendFeedback}>\n            Send Feedback\n          </button>\n          {feedbackError && (\n            <div className=\"error-message-feedback\">{feedbackError}</div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Feedback;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}