{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Husei\\\\aubify\\\\Frontend\\\\src\\\\components\\\\PostPage\\\\PostPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport NavBar from \"../NavBar/NavBar\";\nimport \"./PostPage.css\";\nimport SideBar from \"../SideBar/SideBar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PostPage = () => {\n  _s();\n  const [newPostTitle, setNewPostTitle] = useState(\"\");\n  const [newPostContent, setNewPostContent] = useState(\"\");\n  const [remainingTitleWords, setRemainingTitleWords] = useState(50);\n  const [remainingPostWords, setRemainingPostWords] = useState(500);\n  const [postError, setPostError] = useState(\"\");\n  const navigate = useNavigate();\n  const handleInputChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    if (name === \"title\") {\n      // Limit the input to 50 characters\n      const truncatedValue = value.slice(0, 50);\n      setNewPostTitle(truncatedValue);\n      // Update remaining characters count\n      const remainingTitle = Math.max(0, 50 - truncatedValue.length);\n      setRemainingTitleWords(remainingTitle);\n    } else {\n      // Limit the input to 500 characters\n      const truncatedValue = value.slice(0, 500);\n      setNewPostContent(truncatedValue);\n      // Update remaining characters count\n      const remainingContent = Math.max(0, 500 - truncatedValue.length);\n      setRemainingPostWords(remainingContent);\n    }\n    setPostError(\"\");\n  };\n  const handleCreatePost = async () => {\n    if (newPostTitle.trim() === \"\" || newPostContent.trim() === \"\") {\n      setPostError(\"Please enter both title and content for the post.\");\n      return;\n    }\n    const userEmail = localStorage.getItem(\"userEmail\");\n    try {\n      // Include the userEmail in the request body\n      await axios.post(\"/posts\", {\n        title: newPostTitle,\n        content: newPostContent,\n        userEmail // Send the user's email with the post data\n      });\n      navigate(\"/homepage\");\n    } catch (error) {\n      console.error(\"Failed to create post:\", error);\n      setPostError(\"You have reached your posting limit for today, please try again later!\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"post-page\",\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SideBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-page-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Add a Post:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Post Title\",\n        className: \"post-title-input\",\n        value: newPostTitle,\n        name: \"title\",\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"remaining-title-characters\",\n        children: [\"Characters Remaining: \", remainingTitleWords]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"What's on your mind?\",\n        className: \"post-content-input\",\n        value: newPostContent,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"remaining-post-characters\",\n        children: [\"Characters Remaining: \", remainingPostWords]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"submit-post-button\",\n        onClick: handleCreatePost,\n        children: \"Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), postError && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message-postpage\",\n        children: postError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 23\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n_s(PostPage, \"gysUiYUCHFSXII4I8+KUrbLMnu0=\", false, function () {\n  return [useNavigate];\n});\n_c = PostPage;\nexport default PostPage;\nvar _c;\n$RefreshReg$(_c, \"PostPage\");","map":{"version":3,"names":["React","useState","useNavigate","axios","NavBar","SideBar","jsxDEV","_jsxDEV","PostPage","_s","newPostTitle","setNewPostTitle","newPostContent","setNewPostContent","remainingTitleWords","setRemainingTitleWords","remainingPostWords","setRemainingPostWords","postError","setPostError","navigate","handleInputChange","event","name","value","target","truncatedValue","slice","remainingTitle","Math","max","length","remainingContent","handleCreatePost","trim","userEmail","localStorage","getItem","post","title","content","error","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Husei/aubify/Frontend/src/components/PostPage/PostPage.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport NavBar from \"../NavBar/NavBar\";\nimport \"./PostPage.css\";\nimport SideBar from \"../SideBar/SideBar\";\n\nconst PostPage = () => {\n  const [newPostTitle, setNewPostTitle] = useState(\"\");\n  const [newPostContent, setNewPostContent] = useState(\"\");\n  const [remainingTitleWords, setRemainingTitleWords] = useState(50);\n  const [remainingPostWords, setRemainingPostWords] = useState(500);\n  const [postError, setPostError] = useState(\"\");\n  const navigate = useNavigate();\n\n  const handleInputChange = (event) => {\n    const { name, value } = event.target;\n    if (name === \"title\") {\n      // Limit the input to 50 characters\n      const truncatedValue = value.slice(0, 50);\n      setNewPostTitle(truncatedValue);\n      // Update remaining characters count\n      const remainingTitle = Math.max(0, 50 - truncatedValue.length);\n      setRemainingTitleWords(remainingTitle);\n    } else {\n      // Limit the input to 500 characters\n      const truncatedValue = value.slice(0, 500);\n      setNewPostContent(truncatedValue);\n      // Update remaining characters count\n      const remainingContent = Math.max(0, 500 - truncatedValue.length);\n      setRemainingPostWords(remainingContent);\n    }\n    setPostError(\"\");\n  };\n\n  const handleCreatePost = async () => {\n    if (newPostTitle.trim() === \"\" || newPostContent.trim() === \"\") {\n      setPostError(\"Please enter both title and content for the post.\");\n      return;\n    }\n    const userEmail = localStorage.getItem(\"userEmail\");\n\n    try {\n      // Include the userEmail in the request body\n      await axios.post(\"/posts\", {\n        title: newPostTitle,\n        content: newPostContent,\n        userEmail, // Send the user's email with the post data\n      });\n      navigate(\"/homepage\");\n    } catch (error) {\n      console.error(\"Failed to create post:\", error);\n      setPostError(\n        \"You have reached your posting limit for today, please try again later!\"\n      );\n    }\n  };\n\n  return (\n    <div className=\"post-page\">\n      <NavBar />\n      <SideBar />\n      <div className=\"post-page-container\">\n        <h1>Add a Post:</h1>\n        <input\n          type=\"text\"\n          placeholder=\"Post Title\"\n          className=\"post-title-input\"\n          value={newPostTitle}\n          name=\"title\"\n          onChange={handleInputChange}\n        />\n        <div className=\"remaining-title-characters\">\n          Characters Remaining: {remainingTitleWords}\n        </div>\n        <textarea\n          placeholder=\"What's on your mind?\"\n          className=\"post-content-input\"\n          value={newPostContent}\n          onChange={handleInputChange}\n        ></textarea>\n        <div className=\"remaining-post-characters\">\n          Characters Remaining: {remainingPostWords}\n        </div>\n        <button className=\"submit-post-button\" onClick={handleCreatePost}>\n          Post\n        </button>\n        {postError && <div className=\"error-message-postpage\">{postError}</div>}\n      </div>\n    </div>\n  );\n};\n\nexport default PostPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}